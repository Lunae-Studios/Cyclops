{
  "format_version": "1.16.0",
  "minecraft:entity": {
    "description": {
      "identifier": "lunae:cyclops_first",
      "is_spawnable": true,
      "is_summonable": true,
      "is_experimental": false,
	  "scripts": {
        "animate": [
          "cyclops"
        ]
      },
      "animations": {
        "cyclops": "controller.animation.cyclops"
      }
    },
    "component_groups": {
		"second_transform":{
			"minecraft:transformation":{
				"into": "lunae:cyclops_second"      
			}
		},
		"first_stage":{
			"minecraft:health":{
				"value": 1000
			},
			"minecraft:boss":{
				"name": "Cyclops [1st stage]"
			}
		},	
		"aggressive":{
		 "minecraft:attack": {
		"damage": 10
		},
		"minecraft:movement": {
        "value": 0.3
		},
		 "minecraft:behavior.nearest_attackable_target": {
        "priority": 2,
        "within_radius": 100,
        "reselect_targets": true,
        "entity_types": [
          {
            "filters": {
              "any_of": [
                { "test": "is_family", "subject": "other", "value": "player" },
           { "test": "is_family", "subject": "other", "value": "zombie" }
              ]
            },
            "max_dist": 100
          }
        ],
        "must_see": true
      },
		"minecraft:behavior.delayed_attack": {
        "priority": 0,
        "reach_multiplier": 1.3,
        "attack_duration": 0.5,
		"hit_delay_pct": 0.3,
        "track_target": true
      },
		"minecraft:behavior.hurt_by_target": {
        "priority": 1
      }
		},		
		"stun":{
			"minecraft:is_stunned":{},
			"minecraft:timer": {
          "time": [ 5,5 ],
          "looping": false,
          "time_down_event": {
            "event": "remove_stun",
            "target": "self"
          }
        },
		 "minecraft:attack":{
		"damage": 0
		},
		"minecraft:movement": {
        "value": 0
		}
		}
    },

    "components": {
		"minecraft:knockback_resistance": {
        "value": 1.0
      },
		"minecraft:damage_sensor": {
			"triggers":[
        {
          "on_damage": {
            "filters": {
			  "all_of": [
			    {"test": "has_damage", "value": "fatal"}
			  ]
            },
            "event": "second"
          }
        },
		{
          "on_damage": {
            "filters": {
			  "all_of": [
			    {"test": "has_damage", "value": "fatal"}
			  ]
            },
            "event": "second"
          }
        }
		]
      },
	"minecraft:environment_sensor": {
				"triggers": [
				{
					"filters": {
						"all_of": [
						{
							"test": "has_tag",
							"subject": "self",
							"value": "stun"
						},
						{
							"test": "has_component",
							"operator": "!=",
							"value": "minecraft:is_stunned"
						}
					]
				},
				"event": "stunned"
				}
				]
				
			},
      "minecraft:type_family": {
        "family": [ "cyclops","mobs" ]
      },
	  "minecraft:loot": {
        "table": "loot_tables/empty.json"
      },
	  "minecraft:behavior.look_at_target":{
		"look_distance": 10
	  },
	  "minecraft:behavior.random_stroll": {
        "priority": 5,
        "speed_multiplier": 1
      },
      "minecraft:breathable": {
        "total_supply": 15,
        "suffocate_time": 0
      },
      "minecraft:collision_box": {
        "width": 2.3,
        "height": 6
      },
      "minecraft:hurt_on_condition": {
        "damage_conditions": [
          {
            "filters": { "test": "in_lava", "subject": "self", "operator": "==", "value": true },
            "cause": "lava",
            "damage_per_tick": 4
          }
        ]
      },
	  "minecraft:persistent": {},
	   "minecraft:nameable": {},
      "minecraft:physics": {},  	
      "minecraft:navigation.walk": {	
        "can_path_over_water": true,
		"avoid_portals": true		
      },
      "minecraft:movement.basic": {
      },
      "minecraft:jump.static": {
      }
    },

    "events": {
	"minecraft:entity_spawned":{
		"add":{"component_groups":["first_stage","aggressive"]}
	},
	"second":{
		"add":{"component_groups":["second_transform"]}
	},
	"stunned":{
		"add":{"component_groups":["stun"]},
		"remove":{"component_groups":["aggressive"]}
	},
	"remove_stun":{
		"add":{"component_groups":["aggressive"]},
		"remove":{"component_groups":["stun"]}
	}
    }
  }
}
