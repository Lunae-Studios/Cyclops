{
  "format_version": "1.16.0",
  "minecraft:entity": {
    "description": {
      "identifier": "lunae:cyclops_final",
      "is_spawnable": true,
      "is_summonable": true,
      "is_experimental": false,
	  "scripts": {
        "animate": [
          "cyclops",
		  "lev"
        ]
      },
      "animations": {
        "cyclops": "controller.animation.cyclops",
		"lev": "controller.animation.cyclops.lev"
      }
    },
    "component_groups": {
		"final_transform":{		
			"minecraft:transformation":{
				"into": "lunae:cyclops_death"      
			}

		},						
		"levitate":{
			"minecraft:is_saddled":{},
			"minecraft:timer": {
			"time": [ 0,0 ],
			"looping": false,
			"time_down_event": {
            "event": "switch_attack",
            "target": "self"
          }
        }
		},
		"melee":{
			 "minecraft:attack":{
				"damage": 50
			},
			"minecraft:movement": {
				"value": 0.3
			},
			"minecraft:behavior.delayed_attack": {
			"priority": 0,
			"reach_multiplier": 1.3,
			"attack_duration": 0.5,
			"hit_delay_pct": 0,
			"track_target": true
			},
			"minecraft:behavior.nearest_attackable_target": {
				"priority": 2,
				"within_radius": 100,
				"reselect_targets": true,
				"entity_types": [
					{
				"filters": {
				"any_of": [
                { "test": "is_family", "subject": "other", "value": "player" }
						]
				},
				"max_dist": 100
					}
					],
				"must_see": true
			},
			"minecraft:behavior.hurt_by_target": {
			"priority": 1
			},
			"minecraft:timer": {
			"time": [ 5,5 ],
			"looping": false,
			"time_down_event": {
            "event": "switch_attack",
            "target": "self"
          }
        }
		},
		"range":{
			 "minecraft:attack": {
				"damage": 50
			},
			"minecraft:movement": {
				"value": 0.3
			},
			"minecraft:shooter": {
				"def": "minecraft:fireball"
			},
			 "minecraft:behavior.ranged_attack": {
			"priority": 0,
			"attack_interval_min": 1,
			"attack_interval_max": 1,
			"attack_radius": 20.0
			},
			"minecraft:behavior.nearest_attackable_target": {
				"priority": 2,
				"within_radius": 100,
				"reselect_targets": true,
				"entity_types": [
					{
				"filters": {
				"any_of": [
                { "test": "is_family", "subject": "other", "value": "player" }
						]
				},
				"max_dist": 100
					}
					],
				"must_see": true
			},
			"minecraft:behavior.hurt_by_target": {
			"priority": 1
			},
			"minecraft:timer": {
          "time": [ 5,5 ],
          "looping": false,
          "time_down_event": {
            "event": "switch_attack",
            "target": "self"
          }
        }
		},
		"stun":{
			"minecraft:is_stunned":{},
			"minecraft:timer": {
          "time": [ 5,5 ],
          "looping": false,
          "time_down_event": {
            "event": "remove_stun",
            "target": "self"
          }
        },
		 "minecraft:attack":{
		"damage": 0
		},
		"minecraft:movement": {
        "value": 0
		}
		}
    },

    "components": {
	"minecraft:knockback_resistance": {
        "value": 1.0
      },
	"minecraft:timer": {
          "time": [ 0,0 ],
          "looping": false,
          "time_down_event": {
            "event": "attack",
            "target": "self"
          }
        },
	"minecraft:health":{
				"value": 8600
			},
			"minecraft:boss":{
				"name": "Cyclops [3rd stage]"
			},
		"minecraft:damage_sensor": {
			"triggers":[
        {
          "on_damage": {
            "filters": {
			  "all_of": [
			    {"test": "has_damage", "value": "fatal"}
			  ]
            },
            "event": "switch"
          }		  
        },
		{
          "on_damage": {
            "filters": {
			  "all_of": [
			    {"test": "has_equipment","domain":"hand","subject":"other","operator": "!=", "value": "lunae:stardust"}
			  ]
            }
          },
			"deals_damage": false
        }
		]
      },
	"minecraft:environment_sensor": {
				"triggers": [
				{
					"filters": {
						"all_of": [
						{
							"test": "has_tag",
							"subject": "self",
							"value": "stun"
						},
						{
							"test": "has_component",
							"operator": "!=",
							"value": "minecraft:is_stunned"
						}
					]
				},
				"event": "stunned"
				}
				]
				
			},
      "minecraft:type_family": {
        "family": [ "cyclops","mobs" ]
      },
	  "minecraft:loot": {
        "table": "loot_tables/empty.json"
      },
	  "minecraft:behavior.look_at_target":{
		"look_distance": 10
	  },
	  "minecraft:behavior.random_stroll": {
        "priority": 5,
        "speed_multiplier": 1
      },
      "minecraft:breathable": {
        "total_supply": 15,
        "suffocate_time": 0
      },
      "minecraft:collision_box": {
        "width": 2.3,
        "height": 6
      },
      "minecraft:hurt_on_condition": {
        "damage_conditions": [
          {
            "filters": { "test": "in_lava", "subject": "self", "operator": "==", "value": true },
            "cause": "lava",
            "damage_per_tick": 4
          }
        ]
      },
	  "minecraft:fire_immune":{},
	  "minecraft:persistent": {},
	   "minecraft:nameable": {},
      "minecraft:physics": {},	  
      "minecraft:navigation.walk": {	
        "can_path_over_water": true,
		"avoid_portals": true		
      },
      "minecraft:movement.basic": {
      },
      "minecraft:jump.static": {
      }
    },

    "events": {
	"switch_attack":{
		"randomize":[
			{
				"weight": 50,
				"add":{"component_groups":["melee"]},
				"remove":{"component_groups":["range","levitate"]}
			},
			{
				"weight": 50,
				"add":{"component_groups":["range"]},
				"remove":{"component_groups":["melee","levitate"]}
			},
			{
				"weight": 50,
				"add":{"component_groups":["levitate"]},
				"remove":{"component_groups":["melee","range"]}
			}
		]
	},
	"attack":{
		"add":{"component_groups":["melee"]}
	},
	"switch":{
		"add":{"component_groups":["final_transform"]}
	},
	"stunned":{
		"add":{"component_groups":["stun"]},
		"remove":{"component_groups":["range","levitate","melee"]}
	},
	"remove_stun":{
		"add":{"component_groups":["levitate"]},
		"remove":{"component_groups":["stun"]}
	}
    }
  }
}
